/* chartist-plugin-threshold 0.0.2
 * Copyright Â© 2016 Gion Kunz
 * Free to use under the WTFPL license.
 * http://www.wtfpl.net/
 */

!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.returnExportsGlobal=b()}):"object"==typeof exports?module.exports=b():a["Chartist.plugins.ctThreshold"]=b()}(this,function(){return function(a,b,c){"use strict";function d(a,b,d){var f=a.svg.querySelector("defs")||a.svg.elem("defs"),g=a.svg.width(),h=a.svg.height(),i=f.elem("mask",{x:0,y:0,width:g,height:h,id:d.maskNames.aboveThreshold}),j=f.elem("mask",{x:0,y:0,width:g,height:h,id:d.maskNames.belowThreshold});if(b.data.length){var k=c.Interpolation.none({fillHoles:!0}),l=e(a,b.data,k),m=l.pathElements[0],n=l.pathElements[l.pathElements.length-1],o=l.clone(!0).position(0).remove(1).move(m.x,0).line(m.x,m.y).position(l.pathElements.length+1).line(n.x,0),p=l.position(0).remove(1).move(m.x,h).line(m.x,m.y).position(l.pathElements.length+1).line(n.x,h);i.elem("path",{d:o.stringify(),fill:"white"}),j.elem("path",{d:p.stringify(),fill:"white"})}return f}function e(a,b,d){var e=[],f=[],g=c.normalizeData({series:[b]});return b=c.getDataArray(g,a.options.reverseData,!0).shift(),b.forEach(function(c,d){var g={x:a.chartRect.x1+a.axisX.projectValue(c,d,b),y:a.chartRect.y1-a.axisY.projectValue(c,d,b)};e.push(g.x,g.y),f.push({value:c,valueIndex:d,meta:""})}),d(e,f)}function f(a,b){var d;if(c.isNum(a)){var e=c.times(b.data.labels.length).map(function(){return a});d={data:e,name:"_threshold"}}else if("string"==typeof a?d=b.data.series.reduce(function(b,c){return c.name===a?c:b},a):a.constructor===Array&&(d={data:a,name:"_threshold"}),!(d instanceof Object&&d.data))throw new Error("Invalid 'threshold' value provided to chartist-plugin-threshold: "+a);return d}var g={threshold:0,classNames:{aboveThreshold:"ct-threshold-above",belowThreshold:"ct-threshold-below"},maskNames:{aboveThreshold:"ct-threshold-mask-above",belowThreshold:"ct-threshold-mask-below"}};c.plugins=c.plugins||{},c.plugins.ctThreshold=function(a){return a=c.extend({},g,a),function(b){if(b instanceof c.Line||b instanceof c.Bar){var e=f(a.threshold,b);b.on("draw",function(b){if(!b.series||b.series.name!==e.name)if("point"===b.type){var c=Number(e.data[b.index]||0);b.element.addClass(b.value.y>=c?a.classNames.aboveThreshold:a.classNames.belowThreshold)}else"line"!==b.type&&"bar"!==b.type&&"area"!==b.type||(b.element.parent().elem(b.element._node.cloneNode(!0)).attr({mask:"url(#"+a.maskNames.aboveThreshold+")"}).addClass(a.classNames.aboveThreshold),b.element.attr({mask:"url(#"+a.maskNames.belowThreshold+")"}).addClass(a.classNames.belowThreshold))}),b.on("created",function(b){e.data.length&&d(b,e,a)})}}}}(window,document,Chartist),Chartist.plugins.ctThreshold});
//# sourceMappingURL=chartist-plugin-threshold.min.js.map