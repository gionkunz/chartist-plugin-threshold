/* chartist-plugin-threshold 0.0.2
 * Copyright Â© 2016 Gion Kunz
 * Free to use under the WTFPL license.
 * http://www.wtfpl.net/
 */

!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.returnExportsGlobal=b()}):"object"==typeof exports?module.exports=b():a["Chartist.plugins.ctThreshold"]=b()}(this,function(){return function(a,b,c){"use strict";function d(a,b,c){var d=a.svg.querySelector("defs")||a.svg.elem("defs"),f=a.svg.width(),g=a.svg.height(),h=d.elem("mask",{x:0,y:0,width:f,height:g,id:c.maskNames.aboveThreshold}),i=d.elem("mask",{x:0,y:0,width:f,height:g,id:c.maskNames.belowThreshold});if(b.data.length){var j=c.lineSmooth,k=e(a,b.data,j),l=k.pathElements[0],m=k.pathElements[k.pathElements.length-1],n=k.clone(!0).position(0).remove(1).move(l.x,0).line(l.x,l.y).position(k.pathElements.length+1).line(m.x,0),o=k.position(0).remove(1).move(l.x,g).line(l.x,l.y).position(k.pathElements.length+1).line(m.x,g);h.elem("path",{d:n.stringify(),fill:"white"}),i.elem("path",{d:o.stringify(),fill:"white"})}return d}function e(a,b,c){var d=[],e=[];return b.forEach(function(c,f){var g={x:a.chartRect.x1+a.axisX.projectValue(c,f,b),y:a.chartRect.y1-a.axisY.projectValue(c,f,b)};d.push(g.x,g.y),e.push({value:c,valueIndex:f,meta:""})}),c(d,e)}function f(a,b){var d;if(c.isNum(a)){var e=[];if(b.data.series.length){var f=b.data.series.reduce(function(a,b){return Math.max(a,(b.data||b).length)},0);e=c.times(f).map(function(){return a})}d={data:e,name:"_threshold"}}else if("string"==typeof a?d=b.data.series.reduce(function(b,c){return c.name===a?c:b},a):a.constructor===Array&&(d={data:a,name:"_threshold"}),!(d instanceof Object&&d.data))throw new Error("Invalid 'threshold' value provided to chartist-plugin-threshold: "+a);var g=c.normalizeData({series:[d]});return d.data=c.getDataArray(g,b.options.reverseData,!0).shift(),d}var g={threshold:0,classNames:{aboveThreshold:"ct-threshold-above",belowThreshold:"ct-threshold-below"},maskNames:{aboveThreshold:"ct-threshold-mask-above",belowThreshold:"ct-threshold-mask-below"},lineSmooth:c.Interpolation.none({fillHoles:!0})};c.plugins=c.plugins||{},c.plugins.ctThreshold=function(a){return a=c.extend({},g,a),function(b){if(b instanceof c.Line||b instanceof c.Bar){var e=f(a.threshold,b);b.on("draw",function(b){if(!b.series||!b.series.name||b.series.name!==e.name)if("point"===b.type){var c=e.data[b.index]||{y:0},d=+c.y||0;b.element.addClass(b.value.y>=d?a.classNames.aboveThreshold:a.classNames.belowThreshold)}else"line"!==b.type&&"bar"!==b.type&&"area"!==b.type||(b.element.parent().elem(b.element._node.cloneNode(!0)).attr({mask:"url(#"+a.maskNames.aboveThreshold+")"}).addClass(a.classNames.aboveThreshold),b.element.attr({mask:"url(#"+a.maskNames.belowThreshold+")"}).addClass(a.classNames.belowThreshold))}),b.on("created",function(b){e.data.length&&d(b,e,a)})}}}}(window,document,Chartist),Chartist.plugins.ctThreshold});
//# sourceMappingURL=chartist-plugin-threshold.min.js.map